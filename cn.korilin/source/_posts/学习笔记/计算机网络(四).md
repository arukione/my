---
title: 计算机网络（四）
date: 2020-12-24
categories: 学习笔记
tags:
    - 计算机网络
---

IP 地址 ::= {< 网络号 >,< 主机号 >}

### IP 地址类型

| 网络类型 | 类别位 | 可指派网络数 | 网络号指派范围 | 每个网络可指派主机数 |
| :--: | :--: | :--: | :--: | :--: |
| A 类 | 0 | 126(2^7-2) | 1 ~ 126 | 16777214 |
| B 类 | 10 | 16384(2^14) | 128.0 ~ 191.255 | 65534 |
| C 类 | 110 | 2097152(2^21) | 192.0.0 ~ 223.255.255 | 254 |
| D 类 | 1110 | 多播地址 | | |
| E 类 | 1111 | 保留为今后使用 | | |

A、B、C 类地址都是单播地址（一对一通信）

### 地址解析协议 ARP

将同一个局域网上的主机或路由器的 IP 地址转化为 MAC 地址 / 硬件地址的映射

解决方法：每一台主机都有一个 ARP 高速缓存（ARP cache），在主机 ARP 高速缓存中放一个从 IP 地址到硬件地址的映射表，映射表经常动态更新。

发送 IP 数据报时查找 IP 映射表方式：
1. 主机 A 先在 ARP 高速缓存查看有无主机 B 的 IP 地址，如果有就直接查出对应的硬件地址，然后写入 MAC 帧
2. 如果没有 ARP 进程就在本局域网上广播发送一个 ARP 请求分组
3. 本局域网上所有主机运行的 ARP 进程都接收到此 ARP 请求分组
4. IP 地址与 ARP 请求分组中查询的 IP 地址一致的主机 B 接收这个 ARP 分组，不一致的主机不理睬这个请求分组
5. 主机 B 向主机 A 发送 ARP 响应分组，响应中写入了主机的硬件地址
6. ARP 请求分组是广播发送，但 ARP 响应分组是普通的单播，从一个源地址发送到一个目的地址

### IP 数据报

IP 数据报由首部和数据两个部分组成。

首部的前一部分是固定部分，长度固定共 20 字节，是所有 IP 数据包必须具有的；首部后固定部分的后面是一些可选字段，其长度是可变的。

固定部分包括：
- 版本，占 4 位
- 首部长度，占 4 位
- 区分服务，1998 年改名为区分服务 DS（Differentiated Services），占 8 位
- 总长度，首部和数据之和的长度，单位字节
- 标识，占 16 位
- 标志，占 3 位
- 片偏移，占 13 位
- 生存时间，占 8 位
- 协议，占 8 位
- 首部检验和，占 16 位
- 源地址，占 32 位
- 目的地址，占 32 位

### 无分类编址 CIDR

无分类域间路由选择（Classless Inter-Domain Routing）

*IP 地址 ::= {< 网络前缀 >,< 主机号 >}*

**使用“斜线记法”，或称为 CIDR 记法，来表示网络前缀占用的位数**

特点：消除了传统的 A 类、B 类、C 类地址以及划分子网的概念，把网络相同的连续的 IP 地址组成一个“CIDR 地址块”

网络前缀相同的连续 IP 地址组成一个“**CIDR 地址块**”；
一个 CIDR 地址块中由很多地址，利用 CIDR 地址块查找目的网络，这种地址的聚合称为路由聚合（route aggregation），也称为构成超网（supernetting）。


